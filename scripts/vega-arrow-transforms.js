!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("vega"),require("apache-arrow")):"function"==typeof define&&define.amd?define(["exports","vega","apache-arrow"],a):a(((t=t||self).vega=t.vega||{},t.vega.transforms=t.vega.transforms||{},t.vega.transforms.arrow={}),t.vega,t.apacheArrow)}(this,(function(t,a,r){"use strict";const e=a,s=r;var i=a.Transform,o=r.Table;class n extends i{constructor(t){super([],t),this.type="ArrowTransform"}data(t){return t instanceof o?(this._data=t,this):t instanceof ArrayBuffer?(t=new Uint8Array(t),this._data=o.from(Array.isArray(t)?t:[t]),this):(this._data=o.new(t),this)}async transform(t,a){if(!this._data)throw Error("ArrowTransform missing data Table.");if(!a)throw Error("ArrowTransform missing params.");var r,e=a.countBy,s=a.filter,i=a.getColumn,o=a.getColumnAt,n=a.select,f=a.selectAt,c=a.slice;e?r=await this._data.countBy(e):s?r=await this._data.filter(s):i?r=await this._data.getColumn(i):o?r=await this._data.getColumnAt(o):n?r=await this._data.select(n):f?r=await this._data.selectAt(f):c&&(r=await this._data.slice(c.get("begin"),c.get("end")));const d=t.fork(t.NO_FIELDS&t.NO_SOURCE);return d.rem=this._value,this._value=d.add=d.source=r,d}}t.ArrowTransform=n,t.Slice=class{constructor(t,a){this.begin=t,this.end=a}},t.apacheArrow=s,t.register=function(t){"undefined"!==t&&(t.transforms.ArrowFilter=n)},t.vega=e,Object.defineProperty(t,"__esModule",{value:!0})}));